<!doctype HTML>
<html lang="en">
  <head>
    <!-- Required meta tags -->
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
	    
	    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
	    <link rel="stylesheet" type="text/css" href="css/style.css">
	    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
	    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
	    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>
	    
   </head>
   <script type="text/javascript">
   	
   </script>
   <script>
	   function allowDrop(ev) {
	   		ev.preventDefault();
	   }

	   function drag(ev) {
          	ev.dataTransfer.setData("text", ev.target.className); 
          	let srcIndex = $(ev.srcElement).index() / 2;
          	pickData(srcIndex);
	   }


	   function drop(ev) {
	       ev.preventDefault();
	       var data = ev.dataTransfer.getData("text");
	       let destIndex = $(ev.srcElement).parent().parent().parent().index() / 2;
	       let resolveErrorIndex = $(ev.srcElement).parent().parent().index() / 2;
	       addItemToTable(max(resolveErrorIndex, destIndex));
	   }

	   function max(a, b) {
	   		if(a > b) return a;
	   		return b;
	   }
   </script>

   <!--@param can be true or false ... 1st param is for updating menulist and 2nd for table list -->
  <body onload="initialiseTablesAndMenu(false, false)">
  	<div class="container">

  	  <center><h4> Tables </h4></center>
  	    <div class="card sw">
  	    <form>
  	      <input type="search" class="search" placeholder="Search Table... e.g. 1" id="filter_tables" />
  	      <button class="go"><span class="entypo-search"></span></button>
  	    </form>
  	  </div>
  	  <div class="table-list">
  	  	<ul id="table-list-ul">
  	  	</ul>
  	  </div>
  	</div>
  	<hr>
  	<div class="menu">
  		<center><h4>Menu</h4></center>
  	    <div class="card sw" style="width: 50%; margin-left: 10px;">
  	    <form>
  	      <input type="search" class="search" placeholder="Search Menu... e.g. Burger" id="filter_menu_items" />
  	      <button class="go"><span class="entypo-search"></span></button>
  	    </form>
  	  </div>
  	  <div class="table-list">
  	  	<ul id="menu-list">
  	  	</ul>
  	  </div>
  	</div>

  	<!-- Modal -->
  	<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  	  <div class="modal-dialog" role="document">
  	    <div class="modal-content">
  	      <div class="modal-header">
  	        <h5 class="modal-title" id="exampleModalLabel">Table - 1 | Order Details</h5>
  	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
  	          <span aria-hidden="true">&times;</span>
  	        </button>
  	      </div>
  	      <div class="modal-body">
  	        <table class="table">
  	          <thead>
  	            <tr>
  	              <th>S.No</th>
  	              <th>Item</th>
  	              <th>Price</th>
  	              <th>Number Of Servings</th>
  	              <th></th>
  	            </tr>
  	          </thead>
  	          <tbody id="table_body">
  	            
  	          </tbody>
  	        </table>
  	      </div>
  	      <div class="modal-footer">
  	        <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="closeSession()">Close Session and Generate Bill</button>
  	      </div>
  	    </div>
  	  </div>
  	</div>
  	<script type="text/javascript">
  		$(document).on('click', '#table-list-ul .card', function(){
  		        //your code
  		          let index = $(this).parent().index() / 2;
  		          localStorage.setItem('clicked_table_item_index', index);
  		          $('#exampleModal').modal('show');
  		          showTableData(index);
  		      });
  		function closeSession() {
  			let index = localStorage.getItem('clicked_table_item_index');
  			finishSession(index);
  		}
  	</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
  	<script type="text/javascript" src="js/search.handler.js"></script>

  </body>
</html>